"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
exports.__esModule = true;
var rmoas_types_1 = require("../rmoas.types");
var get_mediatype_examples_1 = __importDefault(require("../lib/get-mediatype-examples"));
/**
 * @param operation Operation to retrieve response examples for.
 * @returns An object of response examples keyed by their media type.
 */
function getResponseExamples(operation) {
    return Object.keys(operation.responses || {})
        .map(function (status) {
        var response = operation.responses[status];
        // If we have a $ref here that means that this was a circular ref so we should ignore it.
        if ((0, rmoas_types_1.isRef)(response)) {
            return false;
        }
        var mediaTypes = {};
        (response.content ? Object.keys(response.content) : []).forEach(function (mediaType) {
            if (!mediaType)
                return;
            var mediaTypeObject = response.content[mediaType];
            var examples = (0, get_mediatype_examples_1["default"])(mediaType, mediaTypeObject, {
                includeReadOnly: true,
                includeWriteOnly: false
            });
            if (examples) {
                mediaTypes[mediaType] = examples;
            }
        });
        if (!Object.keys(mediaTypes).length) {
            return false;
        }
        return {
            status: status,
            mediaTypes: mediaTypes
        };
    })
        .filter(Boolean);
}
exports["default"] = getResponseExamples;
